# typed: true
# frozen_string_literal: true

require 'test/unit'
require './datasources/sources/tourinsoft_sirtaqui'

class TestTourinsoftSirtaquiSource < Test::Unit::TestCase
  def test_date
    assert_equal(
      ['2023-11-01', '2023-12-22', 'Nov 01-Dec 22'],
      TourinsoftSirtaquiSource.openning(
        '01/11/2023|22/12/2023|||||',
        :openning_one_days
      )
    )
  end

  def test_hour_multi
    assert_equal(
      ['2023-10-21', '2023-12-31', 'Oct 21-Nov 05 Tu,We,Th,Fr,Sa 10:00-12:30,15:30-19:00;Nov 06-Dec 31 We,Th,Fr,Sa 15:30-19:00'],
      TourinsoftSirtaquiSource.openning(
        '21/10/2023|05/11/2023|10:00|12:30|15:30|19:00|Lundi-Dimanche#06/11/2023|31/12/2023|||15:30|19:00|Lundi-Mardi-Dimanche',
        :openning_one_days
      )
    )
  end

  def test_hour_close
    assert_equal(
      ['2023-10-21', '2023-11-05', 'Oct 21-Nov 05 Tu,We,Th,Fr,Sa,Su 10:00+'],
      TourinsoftSirtaquiSource.openning(
        '21/10/2023|05/11/2023|10:00||||Lundi',
        :openning_one_days
      )
    )
  end

  def test_hour_long_format
    assert_equal(
      ['2023-01-01', '2023-06-23', 'Jan 01-Jun 23 Tu,We,Th,Fr,Sa 09:00-18:00;Jan 01-Jun 23 Su 12:00-18:00'],
      TourinsoftSirtaquiSource.openning(
        '01/01/2023|23/06/2023|||||09:00|18:00|||09:00|18:00|||09:00|18:00|||09:00|18:00|||09:00|18:00|||12:00|18:00|||Lundi',
        :openning_seven_days
      )
    )
  end

  def test_hour_long_format_empty
    assert_equal(
      ['2023-01-01', '2023-06-23', 'Jan 01-Jun 23'],
      TourinsoftSirtaquiSource.openning(
        '01/01/2023|23/06/2023|||||||||||||||||||||||||||||',
        :openning_seven_days
      )
    )
  end

  def test_hour_long_format_long
    assert_equal(
      ['2023-01-01', '2023-06-23', 'Jan 01-Jun 23'],
      TourinsoftSirtaquiSource.openning(
        '03/01/2023|17/05/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#||||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|||||#||||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||#||||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||#18/05/2023|18/05/2023|||||||||||||||||||||||||||||Jeudi#19/05/2023|13/07/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#14/07/2023|14/07/2023|||||||||||||||||||||||||||||Vendredi#15/07/2023|14/08/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#15/08/2023|15/08/2023|||||||||||||||||||||||||||||Mardi#16/08/2023|31/10/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#01/11/2023|01/11/2023|||||||||||||||||||||||||||||Mercredi#02/11/2023|10/11/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#11/11/2023|11/11/2023|||||||||||||||||||||||||||||Samedi#12/11/2023|31/12/2023|||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||Lundi-Dimanche#||||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||#||||||09:30|12:30|15:00|19:00|09:30|12:30|||09:30|12:30|15:00|19:00|09:30|12:30|15:00|19:00|09:30|12:30|16:00|19:00|||||',
        :openning_seven_days
      )
    )
  end
end
